
Allocating common symbols
Common symbol       size              file

buf                 0x100             obj/main.o
tm_global           0x30              obj/time.o
lpIoDevices         0x360             obj/device.o
lpFlpDmaBuf         0x10              obj/floppy.o
krnl_pgdir          0x10              obj/memory.o
cmdbuf              0x100             obj/main.o
lpFilesys           0x240             obj/vfs.o

Discarded input sections

 .drectve       0x00000000       0x14 obj/timer_asm.o

Memory Configuration

Name             Origin             Length             Attributes
*default*        0x00000000         0xffffffff

Linker script and memory map

                0x00400000                __image_base__ = 0x400000
                0x00000000                __dll__ = 0x0
                0x00400000                ___ImageBase = 0x400000
                0x00001000                __section_alignment__ = 0x1000
                0x00000200                __file_alignment__ = 0x200
                0x00000004                __major_os_version__ = 0x4
                0x00000000                __minor_os_version__ = 0x0
                0x00000001                __major_image_version__ = 0x1
                0x00000000                __minor_image_version__ = 0x0
                0x00000004                __major_subsystem_version__ = 0x4
                0x00000000                __minor_subsystem_version__ = 0x0
                0x00000003                __subsystem__ = 0x3
                0x00200000                __size_of_stack_reserve__ = 0x200000
                0x00001000                __size_of_stack_commit__ = 0x1000
                0x00100000                __size_of_heap_reserve__ = 0x100000
                0x00001000                __size_of_heap_commit__ = 0x1000
                0x00000000                __loader_flags__ = 0x0
                0x00000000                __dll_characteristics__ = 0x0
                0x00400000                . = 0x400000

.text           0x00400000     0x7000
                0x00400000                ___text_begin__ = .
 *(.text)
 .text          0x00400000      0x2a4 obj/start.o
                0x00400000                begin
                0x00400020                start
                0x004000e0                get_cmos_byte
                0x004000f1                open_dma_channel
 .text          0x004002a4     0x1050 obj/main.o
                0x004002a4                reboot
                0x004002c8                is_cmd
                0x0040034c                fix_path
                0x0040048c                DllMain
                0x00400490                krnl_panic
                0x004004a4                mem_dump
                0x00400514                kmain
 .text          0x004012f4      0x1c0 obj/exceptions.o
                0x004012f4                exception_proc
 .text          0x004014b4     0x13a0 obj/stdio.o
                0x004014b4                _vsnprintf
                0x00401938                vsprintf
                0x0040211c                _snprintf
                0x00402148                sprintf
                0x0040216c                _scroll_console
                0x00402190                putchar
                0x004022e0                vprintf
                0x00402750                printf
                0x0040276c                puts
                0x004027a4                gets
                0x00402824                getchar
 .text          0x00402854      0x7fc obj/stdlib.o
                0x00402854                labs
                0x00402864                itoa
                0x00402924                _itoa_s
                0x00402a00                atoi
                0x00402a60                atol
                0x00402ac0                strtoul
                0x00402c4c                bsearch
                0x00402cac                strtol
 .text          0x00403050      0x638 obj/string.o
                0x00403050                strlen
                0x00403068                strcmp
                0x004030ac                stricmp
                0x0040312c                strncmp
                0x00403178                strnicmp
                0x0040323c                strcpy
                0x00403268                strncpy
                0x00403328                memcpy
                0x00403414                memcmp
                0x0040345c                memset
                0x0040354c                memmove
 .text          0x00403688      0x124 obj/conio.o
                0x00403688                clreol
                0x004036bc                clrscr
                0x00403710                gotoxy
                0x00403748                textattr
                0x00403754                textbackground
                0x0040376c                textcolor
                0x00403784                wherex
                0x00403798                wherey
 .text          0x004037ac       0x60 obj/irq.o
                0x004037ac                disable_irq
                0x004037dc                enable_irq
 .text          0x0040380c        0x0 obj/intr.o
 .text          0x0040380c      0x2d4 obj/keyb.o
                0x0040380c                input_add
                0x00403830                input_get
                0x00403854                kbd_leds
                0x004038b0                keyb_irq
                0x00403aa4                keyb_init
 .text          0x00403ae0       0x18 obj/keyb_irq.o
                0x00403ae0                irq1
 *fill*         0x00403af8        0x8 00
 .text          0x00403b00      0x135 obj/timer_asm.o
                0x00403b00                irq0
                0x00403b2f                set_pit_freq
                0x00403be2                GetRTCTime
                0x00403c2f                KeTickCount
 *fill*         0x00403c35        0x3 00
 .text          0x00403c38      0x108 obj/timer.o
                0x00403c38                timer_irq
                0x00403c3c                timer_init
 .text          0x00403d40      0x8b0 obj/time.o
                0x00403d40                difftime
                0x00403d5c                mktime
                0x00403ec0                gmtime
                0x00404054                localtime
                0x0040405c                Sleep
                0x0040407c                time
                0x004040a8                clock
                0x004040b4                strftime
                0x00404588                asctime
                0x004045b8                ctime
 .text          0x004045f0      0x4ac obj/memory.o
                0x004045f0                init_memory
                0x00404610                MmGetPhysicalAddress
                0x00404614                MmQuerySystemSize
                0x00404754                malloc
                0x00404764                MmFreeContiguousMemory
                0x00404944                free
                0x00404950                MmAllocateContiguousMemory
 .text          0x00404a9c     0x153c obj/floppy.o
                0x00404a9c                floppy_irq
                0x00404aa8                floppy_specify
                0x00404ba8                floppy_check_interrupt
                0x00404c94                floppy_send_byte
                0x00404ce4                floppy_get_byte
                0x00404d30                floppy_motor_off
                0x00404d58                flp_dev_open
                0x00404d6c                flp_dev_close
                0x00404d80                floppy_motor_on
                0x00404dc4                floppy_wait
                0x00404e28                floppy_seek
                0x004050c4                floppy_calibrate
                0x00405350                floppy_reset
                0x0040559c                floppy_rw
                0x00405bd8                flp_dev_write
                0x00405cbc                flp_dev_read
                0x00405e28                floppy_write
                0x00405e6c                floppy_read
                0x00405eb8                floppy_init
 *fill*         0x00405fd8        0x8 00
 .text          0x00405fe0       0x18 obj/floppy_irq.o
                0x00405fe0                irq6
 .text          0x00405ff8       0x48 obj/device.o
                0x00405ff8                InstallStorage
 .text          0x00406040       0xa8 obj/vfs.o
                0x00406040                MountVolume
                0x004060a0                LoadFS
 .text          0x004060e8      0xa94 obj/fat.o
                0x004060e8                fat_readfile
                0x00406244                fat_getinfo
                0x004062d4                fat_time
                0x00406338                fat_closedir
                0x00406360                fat_destroy
                0x0040638c                fat_init
                0x004064f4                fat_opendir
                0x004068c4                fat_readdir
                0x00407000                . = ALIGN (0x1000)
 *fill*         0x00406b7c      0x484 00
                0x00407000                ___text_end__ = .
                0x00407000                ___data_begin__ = .

.data           0x00407000     0x4000
 *(.data)
 .data          0x00407000      0x828 obj/start.o
                0x0040701e                idt
 *fill*         0x00407828       0x18 00
 .data          0x00407840      0x100 obj/main.o
                0x00407840                lpCurrDir
 .data          0x00407940        0x0 obj/exceptions.o
 .data          0x00407940        0x4 obj/stdio.o
                0x00407940                console_attr
 .data          0x00407944        0x0 obj/stdlib.o
 .data          0x00407944        0x0 obj/string.o
 .data          0x00407944        0x0 obj/conio.o
 .data          0x00407944        0x4 obj/irq.o
                0x00407944                cached_irq_mask
 .data          0x00407948        0x0 obj/intr.o
 *fill*         0x00407948       0x18 00
 .data          0x00407960      0x920 obj/keyb.o
                0x00407960                ScanCodeToVK
                0x00407a60                NumpadUnlockedVK
                0x00407a80                VKToChar
                0x00407e80                VKToCharShift
 .data          0x00408280       0x1e obj/timer_asm.o
                0x00408288                rtc_second
                0x00408289                rtc_minute
                0x0040828a                rtc_hour
                0x0040828b                rtc_day
                0x0040828c                rtc_month
                0x0040828d                rtc_year
 *fill*         0x0040829e        0x2 00
 .data          0x004082a0        0x0 obj/timer.o
 .data          0x004082a0       0xa0 obj/time.o
                0x004082a0                lpDaysInMonth
                0x004082d0                lpWeekDays
                0x00408300                lpMonths
                0x00408330                lpAmPm
 .data          0x00408340     0x1560 obj/memory.o
                0x00408340                free_mem_0
                0x00409888                free_mem
                0x0040988c                free_mem_list
                0x0040989c                allocated_mem
 .data          0x004098a0        0x8 obj/floppy.o
                0x004098a0                uFlpInBuf
                0x004098a4                uTrackInBuf
 .data          0x004098a8        0x0 obj/device.o
 .data          0x004098a8        0x0 obj/vfs.o
 .data          0x004098a8       0x18 obj/fat.o
                0x004098a8                fat_fs
 *(.data2)
 *(.rdata)
 .rdata         0x004098c0      0x408 obj/main.o
 *fill*         0x00409cc8       0x18 00
 .rdata         0x00409ce0      0x2a0 obj/exceptions.o
 .rdata         0x00409f80      0x15c obj/stdio.o
 .rdata         0x0040a0dc      0x220 obj/time.o
 *fill*         0x0040a2fc        0x4 00
 .rdata         0x0040a300       0xc0 obj/floppy.o
                0x0040a320                floppy_geometry
                0x0040a3a0                floppy_speed
 .rdata         0x0040a3c0       0x10 obj/fat.o
 *(.drectve)
 *(.reloc)
 .reloc         0x0040a3d0      0x590 dll stuff
                0x0040b000                . = ALIGN (0x1000)
 *fill*         0x0040a960      0x6a0 00

.edata          0x0040b000     0x1000
 *(.edata)
 .edata         0x0040b000       0x4b dll stuff
                0x0040c000                . = ALIGN (0x1000)
 *fill*         0x0040b04b      0xfb5 00
                0x0040c000                ___data_end__ = .

.bss            0x0040c000     0x2000
                0x0040c000                ___bss_begin__ = .
 *(.bss)
 .bss           0x0040c000        0x0 obj/main.o
 .bss           0x0040c000        0x0 obj/exceptions.o
 .bss           0x0040c000        0x4 obj/stdio.o
                0x0040c000                console_pos
 .bss           0x0040c004        0x0 obj/stdlib.o
 .bss           0x0040c004        0x0 obj/string.o
 .bss           0x0040c004        0x0 obj/conio.o
 .bss           0x0040c004        0x0 obj/irq.o
 .bss           0x0040c004        0x0 obj/intr.o
 *fill*         0x0040c004       0x1c 00
 .bss           0x0040c020       0x60 obj/keyb.o
                0x0040c020                InBuffer
 .bss           0x0040c080        0x4 obj/timer.o
                0x0040c080                sys_start_time
 *fill*         0x0040c084       0x1c 00
 .bss           0x0040c0a0      0x100 obj/time.o
 .bss           0x0040c1a0     0x1000 obj/memory.o
                0x0040c1a0                allocated_mem_0
 .bss           0x0040d1a0       0x14 obj/floppy.o
                0x0040d1a0                floppy
                0x0040d1b0                bFloppyIrq
 .bss           0x0040d1b4        0x4 obj/device.o
                0x0040d1b4                cIoDevices
 *fill*         0x0040d1b8        0x8 00
 .bss           0x0040d1c0      0x320 obj/vfs.o
                0x0040d1c0                lpVolumes
                0x0040d4c0                cFilesys
 .bss           0x0040d4e0       0x30 obj/fat.o
                0x0040d4e0                fat16_fs
                0x0040d4f8                fat32_fs
 *(COMMON)
 COMMON         0x0040d510      0x200 obj/main.o
                0x0040d510                buf
                0x0040d610                cmdbuf
 COMMON         0x0040d710       0x30 obj/time.o
                0x0040d710                tm_global
 COMMON         0x0040d740       0x10 obj/memory.o
                0x0040d740                krnl_pgdir
 COMMON         0x0040d750       0x10 obj/floppy.o
                0x0040d750                lpFlpDmaBuf
 COMMON         0x0040d760      0x360 obj/device.o
                0x0040d760                lpIoDevices
 COMMON         0x0040dac0      0x240 obj/vfs.o
                0x0040dac0                lpFilesys
                0x0040e000                . = ALIGN (0x1000)
 *fill*         0x0040dd00      0x300 00
                0x0040e000                ___bss_end__ = .
                0x0040e000                ___end__ = .
LOAD obj/start.o
LOAD obj/main.o
LOAD obj/exceptions.o
LOAD obj/stdio.o
LOAD obj/stdlib.o
LOAD obj/string.o
LOAD obj/conio.o
LOAD obj/irq.o
LOAD obj/intr.o
LOAD obj/keyb.o
LOAD obj/keyb_irq.o
LOAD obj/timer_asm.o
LOAD obj/timer.o
LOAD obj/time.o
LOAD obj/memory.o
LOAD obj/floppy.o
LOAD obj/floppy_irq.o
LOAD obj/device.o
LOAD obj/vfs.o
LOAD obj/fat.o
OUTPUT(../../bin/ntoskrnl.exe pei-i386)
LOAD dll stuff
